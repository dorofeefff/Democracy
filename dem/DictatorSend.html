{{ block content }}

<h2 id="part">Part I</h2>
<h5 id="round"></h5>
<hr>
&nbsp;

<p>
    You are <b>Individual A</b>.
    Please decide how much of the {{ C.ENDOWMENT }}
    you will keep for yourself.
</p>

<div class="input-group">
    <input type="range"
           name="kept"
           id="send_slider"
           min="1" max="100" step="0.1"
           value="25"
           class="form-range">
</div>

<p id="send_choice"></p>
<p id="keep_choice"></p>

<button class="otree-btn-next btn btn-primary">Submit</button>

<script>
    if ({{ group.round_number }} > 1) {
        // Put the number of the part in the title
        document.getElementById("part").innerHTML = "Part II";

        // Put the number of the round in the title
        let roundNum = {{ group.round_number }} - 1;
        let roundStr = roundNum.toString();
        document.getElementById("round").innerHTML = "Round " + roundStr + ": Decision Stage";
    }

    // The slider
    let sendSlider = document.getElementById("send_slider");
    let sendChoice = document.getElementById("send_choice");
    let keepChoice = document.getElementById("keep_choice");

    let lowBound = 20;
    let upBound = 30;

    if ({{ group.mode }} == "fair") {
        upBound = 40;
    }
    if ({{ group.mode }} == "selfish") {
        lowBound = 10;
    }

    // Message that the user will see based on their choice
    function messageToSenderSend(v) {
        return "Your choice: " + v.toString();
    }
    function messageToSenderKeep(v) {
        return "You keep for yourself: " + (100 - v).toString();
    }
    sendChoice.innerHTML = messageToSenderSend(25);
    keepChoice.innerHTML = messageToSenderKeep(25);

    sendSlider.oninput = function() {
        if (this.value < lowBound) {this.value = lowBound};
        if (this.value > upBound) {this.value = upBound};
        sendChoice.innerHTML = messageToSenderSend(this.value);
        keepChoice.innerHTML = messageToSenderKeep(this.value);
    }
</script>

{{ endblock }}
