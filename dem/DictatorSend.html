{{ block content }}

<h2 id="part"></h2>
<h5 id="round"></h5>
<hr>
&nbsp;

<p>
    You are <b>Individual A</b>.
    Please decide how many of the {{ C.ENDOWMENT }}
    you will allocate to Individual B.
</p>

<div class="input-group">
    <input type="range"
           name="send"
           id="send_slider"
           min="1" max={{ endowment }} step="1"
           value="0"
           class="form-range">
</div>

<p id="send_choice"></p>
<p id="keep_choice"></p>

<button class="otree-btn-next btn btn-primary">Submit</button>

<script src="{{ static 'someScripts.js' }}"></script>
<script>
    // Put correct part and round numbers to the heading
    setPartAndRound({{ group.round_number }}, 'decision')

    // Set the choice set
    let lowBound = {{ send_min }};
    let upBound = {{ send_max }};
    if ({{ group.mode }} == "fair") {
        upBound = {{ send_fair }};
    }
    if ({{ group.mode }} == "selfish") {
        lowBound = {{ send_selfish }};
    }

    // Message that the user will see based on their choice
    function messageToSender(v) {
        document.getElementById("send_choice").innerHTML = "Your choice: " + v.toString();
        document.getElementById("keep_choice").innerHTML = "You keep for yourself: " + ({{ endowment }} - v).toString();
    }

    // Set the default value for the slider and the default message
    sendDefault = ({{ send_min }} + {{ send_max }}) / 2;
    let sendSlider = document.getElementById("send_slider");
    sendSlider.value = (sendDefault);
    messageToSender(sendDefault)

    // Behavior of the slider
    sendSlider.oninput = function() {
        if (this.value < lowBound) {this.value = lowBound};
        if (this.value > upBound) {this.value = upBound};
        messageToSender(this.value);
    }
</script>
{{ endblock }}

